<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Login Test</title>
</head>
<body>

<div style="margin: 20px;">
  <form id="loginForm">
    <label for="uniqueID">UniqueID:</label><br>
    <input type="text" id="uniqueID" name="uniqueID" placeholder="Enter your UniqueID" style="margin-bottom: 10px; width: 300px; height: 40px; font-size: 16px;"><br>
    
    <label for="pin">PIN:</label><br>
    <input type="text" id="pin" name="pin" placeholder="Enter your PIN" style="margin-bottom: 10px; width: 300px; height: 40px; font-size: 16px;"><br>
    
    <button type="button" onclick="generateLink()" style="width: 200px; height: 40px; font-size: 16px;">Generate Link</button>
    <button type="button" onclick="copyToClipboard()" style="width: 200px; height: 40px; font-size: 16px;">Copy to Clipboard</button>
  </form>

  <div style="margin-top: 20px;">
    <p>Generated URL Preview:</p>
    <p id="linkPreview" style="background-color: #f0f0f0; padding: 10px;"></p>
  </div>
</div>

<script>
function generateLink() {
  var uniqueID = document.getElementById("uniqueID").value;
  var pin = document.getElementById("pin").value;
  
  var link = "eloq://login?UNIQUEID=" + encodeURIComponent(uniqueID) + "&PIN=" + encodeURIComponent(pin);
  
  var linkElement = document.createElement("a");
  linkElement.setAttribute("href", link);
    linkElement.setAttribute("onclick", copyURI(link))
  linkElement.setAttribute("target", "_blank");
  linkElement.textContent = "login";


  
  document.getElementById("linkPreview").innerHTML = '';
  document.getElementById("linkPreview").appendChild(linkElement);
}


function copyURI(evt) {
    evt.preventDefault();
    navigator.clipboard.writeText(evt.target.getAttribute('href')).then(() => {
      /* clipboard successfully set */
    }, () => {
      /* clipboard write failed */
    });
}

function copyToClipboard() {
  var link = document.getElementById("linkPreview").querySelector('a').getAttribute('href');
  
  // Create a temporary textarea element
  var tempTextArea = document.createElement("textarea");
  tempTextArea.textContent = link;
  document.body.appendChild(tempTextArea);
  
  // Select and copy the link
  tempTextArea.select();
  document.execCommand("copy");
  
  // Remove the temporary textarea
  document.body.removeChild(tempTextArea);
  
  alert("Link copied to clipboard!");
}
</script>

</body>
</html>
